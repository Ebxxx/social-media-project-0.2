<div class="profile-container" ng-controller="ProfileController">
    <h2>User Profile</h2>
    
    <!-- Display Current User Information -->
    <div class="profile-info">
        <h3>Current Information</h3>
        <div class="profile-picture-preview" ng-if="profile.profile_picture">
            <label>Profile Picture:</label>
            <img ng-src="{{'/storage/profile_picture/' + profile.profile_picture}}" alt="Profile Picture" class="profile-img" />
        </div>
        <div class="profile-details">
            <p><strong>Name:</strong> {{profile.name}}</p>
            <p><strong>Bio:</strong> {{profile.bio || 'No bio available.'}}</p>
        </div>
        <button class="btn-edit" ng-click="editMode = true">Edit Profile</button>
    </div>

    <!-- Edit Profile Section -->
    <div class="edit-profile" ng-if="editMode">
        <h3>Edit Profile</h3>
        <form ng-submit="updateProfile()" class="profile-form">
            <div class="form-group">
                <label for="name">Name:</label>
                <input type="text" id="name" ng-model="profile.name" required>
            </div>
            <div class="form-group">
                <label for="bio">Bio:</label>
                <textarea id="bio" ng-model="profile.bio" placeholder="Tell us something about you..."></textarea>
            </div>
            <div class="form-group">
                <label for="profile_picture">Profile Picture:</label>
                <input type="file" id="profile_picture" onchange="angular.element(this).scope().onFileChange(this)" accept="image/*">
            </div>
            <div class="profile-picture-preview" ng-if="profile.profile_picture">
                <label>Current Profile Picture:</label>
                <img ng-src="{{'/storage/profile_picture/' + profile.profile_picture}}" alt="Profile Picture" class="profile-img" />
            </div>
            <div class="button-group">
                <button type="submit" class="btn-update">Update Profile</button>
                <button type="button" class="btn-cancel" ng-click="editMode = false">Cancel</button>
            </div>
        </form>
    </div>
</div>

<style>
.profile-container {
    max-width: 600px;
    margin: 0 auto;
    padding: 20px;
    border: 1px solid #ccc;
    border-radius: 5px;
    background-color: #f9f9f9;
}

h2 {
    text-align: center;
}

.profile-info {
    margin-bottom: 20px;
    padding: 15px;
    border: 1px solid #eaeaea;
    border-radius: 5px;
    background-color: #fff;
}

.profile-picture-preview {
    display: flex;
    align-items: center;
}

.profile-picture-preview img {
    width: 100px; /* Set a fixed width for the image */
    height: auto;
    border-radius: 50%; /* Make the image round */
    margin-right: 10px; /* Space between image and label */
}

.profile-details {
    margin: 10px 0;
}

.button-group {
    display: flex;
    justify-content: space-between;
    margin-top: 20px;
}

.btn-edit, .btn-update, .btn-cancel {
    padding: 10px 15px;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    width: 48%; /* Set buttons to occupy half of the space */
}

.btn-cancel {
    background-color: #dc3545; /* Different color for cancel button */
}

.btn-edit:hover, .btn-update:hover, .btn-cancel:hover {
    opacity: 0.9; /* Slightly change opacity on hover */
}

.form-group {
    margin-bottom: 15px;
}

label {
    font-weight: bold;
    display: block;
    margin-bottom: 5px;
}

input[type="text"],
textarea {
    width: 100%;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
    box-sizing: border-box; /* Include padding in width calculation */
}

input[type="file"] {
    margin-top: 10px;
}
</style>
